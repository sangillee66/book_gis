tm_shape(nambu_cir_1000) + tm_polygons(col = "gray50", alpha = 0.5) +
tm_shape(nambu_cir) + tm_lines(col = "red", lwd = 5) +
tm_legend(legend.title.size = 1.25, legend.text.size = 1.25, legend.position = c(0.78, 0.05)) +
tm_add_legend(type = "line", lwd = 5, col = "red", lty = 1, labels = "Nambu Circular Rd.", title = "") +
tm_add_legend(type = "fill", size = 0.80, col = "gray50", labels = "Buffering Distance: 1km", title = "") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Lines(Nambu Circular Road)", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_라인", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray98", lwd = 2) +
tm_shape(seoul_sn) + tm_lines(col = "gray50") +
tm_shape(nambu_cir_1000) + tm_polygons(col = "gray50", alpha = 0.5) +
tm_shape(nambu_cir) + tm_lines(col = "red", lwd = 3) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "line", lwd = 2, col = "red", lty = 1, labels = "Nambu Circular Rd.", title = "") +
tm_add_legend(type = "fill", size = 0.80, col = "gray50", labels = "Buffering Distance: 1km", title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Buffering: Lines", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 4), color.dark = "gray60", position = c(0.03, 0.01))
my_map
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders() +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("2km", "2~5km", "5~10km"), title = "Buffering Distance") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Buffering: Polygons(Jung-gu)", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 4), color.dark = "gray60", position = c(0.03, 0.01))
jung_gu <- seoul_gu |>
filter(
SGG1_NM == "중구"
)
jung_gu_2000 <- st_union(st_buffer(jung_gu, dist = 2000))
jung_gu_5000 <- st_union(st_buffer(jung_gu, dist = 5000))
jung_gu_10000 <- st_union(st_buffer(jung_gu, dist = 10000))
qtm(jung_gu_10000) + qtm(jung_gu_5000) + qtm(jung_gu_2000)
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders() +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("2km", "2~5km", "5~10km"), title = "Buffering Distance") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Buffering: Polygons(Jung-gu)", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 4), color.dark = "gray60", position = c(0.03, 0.01))
my_map
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.25, legend.text.size = 1.25, legend.position = c(0.78, 0.05)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("2km", "2~5km", "5~10km"), title = "Buffering Distance") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons(Jung-gu)", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.25, legend.position = c(0.78, 0.05)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("2km", "2~5km", "5~10km"), title = "Buffering Distance") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.2, legend.position = c(0.80, 0.04)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("0~2", "2~5", "5~10"), title = "Buffering Distance (km)") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.2, legend.position = c(0.82, 0.04)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("0~2", "2~5", "5~10"), title = "Buffering Distance (km)") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.2, legend.position = c(0.81, 0.04)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("0~2", "2~5", "5~10"), title = "Buffering Distance (km)") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.2, legend.position = c(0.81, 0.04)) +
tm_add_legend(type = "fill", size = 1, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("0~2", "2~5", "5~10"), title = "Buffering Distance (km)") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(jung_gu_10000) + tm_polygons(col = "#fee8c8") +
tm_shape(jung_gu_5000) + tm_polygons(col = "#fdbb84") +
tm_shape(jung_gu_2000) + tm_polygons(col = "#e34a33") +
tm_shape(seoul_gu, is.master = TRUE) + tm_borders(lwd = 2, col = "gray20") +
tm_shape(jung_gu) + tm_polygons(col = "gray60", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.2, legend.position = c(0.81, 0.04)) +
tm_add_legend(type = "fill", size = 0.80, col = c("#e34a33", "#fdbb84", "#fee8c8"), labels = c("0~2", "2~5", "5~10"), title = "Buffering Distance (km)") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Polygons", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_폴리곤", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
min.val <- seoul_dong |> pull(S1) |> min() |> format(digits = 3)
library(sf)
library(tmap)
library(tidyverse)
#| results: hide
seoul_gu <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_GU_2023_2Q.shp")
seoul_dong <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_EMD_2023_2Q.shp")
#| results: hide
st_area(seoul_gu)
st_area(seoul_dong)
#| results: hide
st_length(st_cast(seoul_gu, "MULTILINESTRING"))
st_area(seoul_dong)
snu_poly_shape_index <- function(poly.shp){
A <- st_area(poly.shp)
P <- st_length(st_cast(poly.shp, "MULTILINESTRING"))
S.1 <- 4*pi*A/P^2
S.2 <- sqrt(S.1)
poly.shp$S1 <- as.numeric(S.1)
poly.shp$S2 <- as.numeric(S.2)
poly.shp
}
seoul_gu <- snu_poly_shape_index(seoul_gu)
seoul_gu |> slice_max(S1)
seoul_gu |> slice_min(S1)
seoul_dong <- snu_poly_shape_index(seoul_dong)
seoul_dong |> slice_max(S1)
seoul_dong |> slice_min(S1)
min.val <- seoul_gu |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_gu |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_gu) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", paste0(">= 0.6", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_legend(legend.position = c(0.81, 0.03)) +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.13),
title = "Compactness Ratio", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01))
my_map
#| echo: false
#| output: false
min.val <- seoul_gu |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_gu |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_gu) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", paste0(">= 0.6", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.25, legend.position = c(0.84, 0.06)) +
tm_layout(inner.margins = c(0.05, 0.04, 0.05, 0.1),
title = "Compactness Ratio", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_형태_서울_구", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
min.val <- seoul_dong |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_dong |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_dong) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", paste0(">= 0.6", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_shape(seoul_gu) + tm_borders(col = "gray20", lwd = 2) +
tm_legend(legend.position = c(0.81, 0.03)) +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.13),
title = "Compactness Ratio", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01))
my_map
min.val <- seoul_dong |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_dong |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_dong) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", "0.6 ~ 0.7", "0.7 ~ 0.8", paste0(">= 0.8", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_shape(seoul_gu) + tm_borders(col = "gray20", lwd = 2) +
tm_legend(legend.position = c(0.81, 0.03)) +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.13),
title = "Compactness Ratio", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01))
my_map
#| echo: false
#| output: false
min.val <- seoul_dong |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_dong |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_dong) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", "0.6 ~ 0.7", "0.7 ~ 0.8", paste0(">= 0.8", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_shape(seoul_gu) + tm_borders(col = "gray20", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.25, legend.position = c(0.84, 0.06)) +
tm_layout(inner.margins = c(0.05, 0.04, 0.05, 0.1),
title = "Compactness Ratio", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_형태_서울_동", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
min.val <- seoul_dong |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_dong |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_dong) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", "0.6 ~ 0.7", "0.7 ~ 0.8", paste0(">= 0.8", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_shape(seoul_gu) + tm_borders(col = "gray20", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.25, legend.position = c(0.84, 0.05)) +
tm_layout(inner.margins = c(0.05, 0.04, 0.05, 0.1),
title = "Compactness Ratio", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_형태_서울_동", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
min.val <- seoul_dong |> pull(S1) |> min() |> format(digits = 3)
max.val <- seoul_dong |> pull(S1) |> max() |> format(digits = 3)
my_map <- tm_shape(seoul_dong) +
tm_polygons(
col = "S1",
palette = "BuPu",
style = "fixed",
breaks = c(0, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1),
labels = c(paste0("< 0.3", " (Min. ", min.val, ")"), "0.3 ~ 0.4", "0.4 ~ 0.5", "0.5 ~ 0.6", "0.6 ~ 0.7", "0.7 ~ 0.8", paste0(">= 0.8", " (Max. ", max.val, ")")),     title = "Compactness", legend.show = TRUE) +
tm_shape(seoul_gu) + tm_borders(col = "gray20", lwd = 2) +
tm_legend(legend.title.size = 1.5, legend.text.size = 1.25, legend.position = c(0.84, 0.04)) +
tm_layout(inner.margins = c(0.05, 0.04, 0.05, 0.1),
title = "Compactness Ratio", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_형태_서울_동", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
tm_shape(seoul_gu) + tm_polygons(col = "gray95") +
tm_shape(seoul_subst) + tm_symbols(col = "black", size = 0.15) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "symbol", size = 0.80, col = "black", shape = 16, labels = "Subway Stations", title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Subway Stations", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 4), color.dark = "gray60", position = c(0.03, 0.01))
#| echo: false
#| output: false
my_map <-
tm_shape(seoul_gu) + tm_polygons(col = "gray95") +
tm_shape(seoul_subst) + tm_symbols(col = "black", size = 0.3) +
tm_legend(legend.title.size = 1.25, legend.text.size = 1.25, legend.position = c(0.820, 0.08)) +
tm_add_legend(type = "symbol", size = 0.70, col = "black", shape = 16, labels = "Subway Stations", title = "") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Geocoding: Coordinates", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_지오코딩_서울지하철", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray95") +
tm_shape(starbucks_seoul_real) + tm_dots(col = "red", size = 0.15, alpha = 1) +
tm_shape(starbucks_seoul_geocoding) + tm_dots(col = "black", size = 0.2, alpha = 0.3) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "symbol", size = 0.80, col = "red", shape = 16, labels = "Starbucks", title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Geocoding: Addresses", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 4), color.dark = "gray60", position = c(0.03, 0.01))
my_map
#| echo: false
#| output: false
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray95") +
tm_shape(starbucks_seoul_real) + tm_dots(col = "red", size = 0.5, alpha = 1) +
tm_shape(starbucks_seoul_geocoding) + tm_dots(col = "black", size = 0.5, alpha = 0.3) +
tm_legend(legend.title.size = 1.25, legend.text.size = 1.25, legend.position = c(0.820, 0.08)) +
tm_add_legend(type = "symbol", size = 0.70, col = "black", shape = 16, labels = "Starbucks", title = "") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Geocoding: Addresses", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_지오코딩_스타벅스", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
#| echo: false
#| output: false
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray95") +
tm_shape(starbucks_seoul_real) + tm_dots(col = "red", size = 0.5, alpha = 1) +
tm_shape(starbucks_seoul_geocoding) + tm_dots(col = "black", size = 0.5, alpha = 0.3) +
tm_legend(legend.title.size = 1.25, legend.text.size = 1.25, legend.position = c(0.820, 0.08)) +
tm_add_legend(type = "symbol", size = 0.80, col = "black", shape = 16, labels = "Starbucks", title = "") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Geocoding: Addresses", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_지오코딩_스타벅스", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray98", lwd = 2) +
tm_shape(seoul_sn) + tm_lines(col = "gray50") +
tm_shape(nambu_cir_1000) + tm_polygons(col = "gray50", alpha = 0.5) +
tm_shape(nambu_cir) + tm_lines(col = "red", lwd = 3) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "line", lwd = 2, col = "red", lty = 1, labels = "Nambu Circular Rd.", title = "") +
tm_add_legend(type = "fill", size = 0.80, col = "gray50", labels = "Buffering Distance: 1km", title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Buffering: Lines", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 4), color.dark = "gray60", position = c(0.03, 0.01))
my_map
#| echo: false
#| output: false
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray98", lwd = 2, border.col = "gray20") +
tm_shape(seoul_sn) + tm_lines(lwd = 0.5, col = "gray50") +
tm_shape(nambu_cir_1000) + tm_polygons(col = "gray50", alpha = 0.5) +
tm_shape(nambu_cir) + tm_lines(col = "red", lwd = 5) +
tm_legend(legend.title.size = 1.25, legend.text.size = 1.25, legend.position = c(0.78, 0.05)) +
tm_add_legend(type = "line", lwd = 5, col = "red", lty = 1, labels = "Nambu Circular Rd.", title = "") +
tm_add_legend(type = "fill", size = 0.80, col = "gray50", labels = "Buffering Distance: 1km", title = "") +
tm_layout(inner.margins = c(0.05, 0.04, 0.04, 0.04),
title = "Buffering: Lines", title.size = 2,
title.position = c(0.02, 0.97)) +
tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, color.dark = "gray60", position = c(0.03, 0.01)) +
tm_credits(text = "SANG-IL LEE, Geography Education at SNU, 2024", size = 0.8, position = c(0.76, 0.01))
my_map
my.path.name <- "D:/My Classes/2024년 2학기/지리정보체계와 지리교육/이미지/"
my.file.name <- paste0(my.path.name, "벡터_버퍼링_라인", ".jpg")
tmap_save(my_map, filename = my.file.name, height = 12.1, dpi = 600)
library(tidyverse)
library(sf)
library(tmap)
library(readxl)
#| results: hide
seoul_gu <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_GU_2023_2Q.shp", options = "ENCODING=CP949")
seoul_dong <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_EMD_2023_2Q.shp", options = "ENCODING=CP949")
seoul_sido <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp", options = "ENCODING=CP949")
gwanak_gu <- seoul_gu |>
filter(
SGG1_NM == "관악구"
)
starbucks_gwanak <- starbucks_seoul_real[which(lengths(st_intersects(starbucks_seoul_real, gwanak_gu)) > 0), ]
my_map <- tm_shape(seoul_gu) + tm_polygons(col = "gray98", lwd = 1) +
tm_shape(gwanak_gu) + tm_polygons(col = "gray70") +
tm_shape(starbucks_seoul_real) + tm_dots(col = "black", size = 0.2) +
tm_shape(starbucks_gwanak) + tm_dots(col = "red", size = 0.2) +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "symbol", size = 0.80, col = "black", shape = 16, labels = "Starbucks", title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Spatial Selection: Point-in-Polygon", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01))
my.map <- tm_shape(seoul_gu) + tm_polygons(lwd = 2, col = "gray95") +
tm_shape(starbucks_seoul_real) + tm_dots(size = 0.15, col = "gray50") +
tm_shape(seoul_subst) + tm_dots(size = 0.15, col = "#377eb8") +
tm_shape(starbucks_closest_station_unique) + tm_dots(size = 0.15, col = "#e41a1c") +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "symbol", size = 0.60, col = c("#377eb8", "#e41a1c", "gray50"), shape = 16, labels = c("Subway Stations (401)", "Nearest Starbucks (254)", "Not Selected Starbucks (426)"), title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Spatial Selection: Point-to-Point", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01))
starbucks_closest_station_index <- st_nearest_feature(seoul_subst, starbucks_seoul_real)
starbucks_seoul_real <- st_read("D:/My R/Vector Data Manipulation Korea/starbucks_seoul.shp", options = "ENCODING=CP949")
starbucks_seoul_real <- st_transform(starbucks_seoul_real, crs = st_crs(seoul_sido))
starbucks_closest_station_index <- st_nearest_feature(seoul_subst, starbucks_seoul_real)
seoul_subst_coords <- read_excel("D:/My R/GIS/서울시 역사마스터 정보.xlsx")
seoul_subst <- st_as_sf(seoul_subst_coords, coords = c("위도", "경도"), crs = 4326)
seoul_subst <- seoul_subst |>
st_transform(crs = st_crs(seoul_sido)) |>
st_intersection(seoul_sido)
library(tidyverse)
library(sf)
library(tmap)
library(readxl)
#| results: hide
seoul_gu <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_GU_2023_2Q.shp", options = "ENCODING=CP949")
seoul_dong <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_EMD_2023_2Q.shp", options = "ENCODING=CP949")
seoul_sido <- st_read("D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp", options = "ENCODING=CP949")
seoul_subst_coords <- read_excel("D:/My R/GIS/서울시 역사마스터 정보.xlsx")
seoul_subst <- st_as_sf(seoul_subst_coords, coords = c("위도", "경도"), crs = 4326)
seoul_subst <- seoul_subst |>
st_transform(crs = st_crs(seoul_sido)) |>
st_intersection(seoul_sido)
starbucks_seoul_real <- st_read("D:/My R/Vector Data Manipulation Korea/starbucks_seoul.shp", options = "ENCODING=CP949")
starbucks_seoul_real <- st_transform(starbucks_seoul_real, crs = st_crs(seoul_sido))
starbucks_closest_station_index <- st_nearest_feature(seoul_subst, starbucks_seoul_real)
starbucks_closest_station <- starbucks_seoul_real[starbucks_closest_station_index, ]
starbucks_closest_station_unique <- starbucks_closest_station[!duplicated(starbucks_closest_station$Sotre_nm), ]
my.map <- tm_shape(seoul_gu) + tm_polygons(lwd = 2, col = "gray95") +
tm_shape(starbucks_seoul_real) + tm_dots(size = 0.15, col = "gray50") +
tm_shape(seoul_subst) + tm_dots(size = 0.15, col = "#377eb8") +
tm_shape(starbucks_closest_station_unique) + tm_dots(size = 0.15, col = "#e41a1c") +
tm_legend(legend.position = c(0.75, 0.03)) +
tm_add_legend(type = "symbol", size = 0.60, col = c("#377eb8", "#e41a1c", "gray50"), shape = 16, labels = c("Subway Stations (401)", "Nearest Starbucks (254)", "Not Selected Starbucks (426)"), title = "") +
tm_layout(inner.margins = c(0.06, 0.04, 0.04, 0.04),
title = "Spatial Selection: Point-to-Point", title.size = 1,
title.position = c("LEFT", "TOP")) +
tm_scale_bar(breaks = seq(0, 20, 5), color.dark = "gray60", position = c(0.03, 0.01))
my.map
