{
  "hash": "f045f67a8bf961a0d891c0758ffff42d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"일반화\"\nauthor: Sang-Il Lee\ndate-modified: last-modified\nnumber-sections: true\nformat: \n  html: \n    toc: true\ncode-link: true\ncode-copy: true\nlightbox: true\nexecute: \n  warning: false\n  error: false\n  freeze: auto\neditor: visual\neditor_options: \n  chunk_output_type: console\n---\n\n\n## 더글라스-포이커(Douglas-Peucker algorithm)\n\n여기서는 거제시를 사례로 더글라스-포이커 알고리즘을 적용하고자 한다. 기본 패키지를 설치한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(tmap)\nlibrary(rmapshaper)\n```\n:::\n\n\n기본 데이터를 불러온다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SIGUNGU1_2023_2Q.shp\", options = \"ENCODING=CP949\")\n```\n:::\n\n\n거제시에 대한 데이터를 생성한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae <- sigungu1 |> \n  filter(\n    SGG1_NM == \"거제시\"\n  )\nqtm(geojae)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n거제시의 버텍스 객수를 센다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 182734\n```\n\n\n:::\n:::\n\n\n서로 다른 허용오차(tolerance)를 적용하여 폴리곤을 생성한다. 0을 적용한다. 위와 동일한 결과가 나옴을 확인한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae.0 <- geojae |> \n  st_simplify(dTolerance = 0)\ngeojae.0 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 182734\n```\n\n\n:::\n:::\n\n\n50미터를 적용한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae.50 <- geojae |> \n  st_simplify(dTolerance = 50)\ngeojae.50 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1906\n```\n\n\n:::\n:::\n\n\n100미터를 적용한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae.100 <- geojae |> \n  st_simplify(dTolerance = 100)\ngeojae.100 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 918\n```\n\n\n:::\n:::\n\n\n500미터를 적용한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae.500 <- geojae |> \n  st_simplify(dTolerance = 500)\ngeojae.500 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 183\n```\n\n\n:::\n:::\n\n\n1,000미터를 적용한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngeojae.1000 <- geojae |> \n  st_simplify(dTolerance = 1000)\ngeojae.1000 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 79\n```\n\n\n:::\n:::\n\n\n서로 다른 허용오차를 적용한 지도를 제작한다. 우선 원 데이터(즉, 0미터)를 제작한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntm_shape(geojae.0) + tm_polygons() \n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n허용오차 100미터 지도를 제작한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntm_shape(geojae.100) + tm_polygons() \n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n허용오차 500미터 지도를 제작한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntm_shape(geojae.500) + tm_polygons()\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n허용오차 1,000미터 지도를 제작한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntm_shape(geojae.500) + tm_polygons()\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## 비스발리엄-화이엇(Visvalingam-Whyatt) 알고리즘\n\n우리나라 시군구 단위의 데이터에 대한 서로 다른 단순화의 정도를 가진 지도를 제작한다.\n\n우선 0.1%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0010 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0010.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0010)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0010 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 11707\n```\n\n\n:::\n:::\n\n\n0.2%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0020 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0020.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0020)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0020 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 16450\n```\n\n\n:::\n:::\n\n\n0.3%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0030 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0030.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0030)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0030 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 21193\n```\n\n\n:::\n:::\n\n\n0.4%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0040 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0040.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0040)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0040 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 25901\n```\n\n\n:::\n:::\n\n\n0.5%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0050 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0050)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0050 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 30803\n```\n\n\n:::\n:::\n\n\n1%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0100 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0100.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0100)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0100 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 54619\n```\n\n\n:::\n:::\n\n\n5%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0500 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_0500.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.0500)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.0500 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 248845\n```\n\n\n:::\n:::\n\n\n우선 10%의 버텍스를 남기는 단순화가 적용된 지도이다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.1000 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIGUNGU1_2023_2Q_GEN_1000.shp\", options = \"ENCODING=CP949\")\nqtm(sigungu1.1000)\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsigungu1.1000 |> st_geometry() |> st_cast(\"POINT\") |> length()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 502582\n```\n\n\n:::\n:::\n\n\n대표적인 두 개에 대해 완전한 지도를 완성한다.\n\n우선, 0.1%를 남기는 지도이다. 여타의 데이터를 불러온다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsido_poly.0100 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIDO_Polyline_2023_2Q_GEN_0010.shp\", options = \"ENCODING=CP949\")\nbbox_seahae.0100 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/BBOX_Seohae3_2023_2Q_GEN_0010.shp\", options = \"ENCODING=CP949\")\nbbox_ulleung.0100 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/BBOX_Ulleung_2023_2Q_GEN_0010.shp\", options = \"ENCODING=CP949\")\n```\n:::\n\n\n지도를 제작한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(sigungu1.0010) + tm_polygons() +\n  tm_shape(sido_poly.0100) + tm_lines(col = \"black\", lwd = 2) +\n  tm_shape(bbox_seahae.0100) + tm_lines() +\n  tm_shape(bbox_ulleung.0100) + tm_lines() +\n  tm_layout(inner.margins = c(0.02, 0.03, 0.02, 0.04)) +\n  tm_scale_bar(breaks = seq(0, 200, 50), color.dark = \"gray60\", position = c(0.48, 0.01))\nmy_map\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-35-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n다음으로, 10%를 남기는 지도이다. 여타의 데이터를 불러온다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsido_poly.1000 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/SIDO_Polyline_2023_2Q_GEN_0020.shp\", options = \"ENCODING=CP949\")\nbbox_seahae.1000 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/BBOX_Seohae3_2023_2Q_GEN_0020.shp\", options = \"ENCODING=CP949\")\nbbox_ulleung.1000 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2023_2Q/BBOX_Ulleung_2023_2Q_GEN_0020.shp\", options = \"ENCODING=CP949\")\n```\n:::\n\n\n지도를 제작한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(sigungu1.1000) + tm_polygons() +\n  tm_shape(sido_poly.1000) + tm_lines(col = \"black\", lwd = 2) +\n  tm_shape(bbox_seahae.1000) + tm_lines() +\n  tm_shape(bbox_ulleung.1000) + tm_lines() +\n  tm_layout(inner.margins = c(0.02, 0.03, 0.02, 0.04)) +\n  tm_scale_bar(breaks = seq(0, 200, 50), color.dark = \"gray60\", position = c(0.48, 0.01))\nmy_map\n```\n\n::: {.cell-output-display}\n![](vector_generalization_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "vector_generalization_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}